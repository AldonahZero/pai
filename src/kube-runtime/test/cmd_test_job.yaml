protocolVersion: 2
name: sshd_test_job
type: job
version: 1
contributor: OpenPAI
parameters:
  modelPath: /tmp/mnist_model
prerequisites:
  - protocolVersion: 2
    name: tf_serving_example
    type: dockerimage
    version: 1.0-r1.4
    contributor: OpenPAI
    uri: openpai/pai.example.tensorflow-serving
taskRoles:
  worker:
    instances: 1
    dockerImage: tf_serving_example
    resourcePerInstance:
      cpu: 4
      memoryMB: 8192
      gpu: 1
      ports:
        model_server: 1
    commands:
      - >-
        sleep infinty
deployments:
  - name: default-deployment
    taskRoles:
      worker:
        preCommands:
          - '# pre-command line 1'
          - '# pre-command line 2'
        postCommands:
          - '# post-command line 1'
          - '# post-command line 2'
defaults:
  deployment: default-deployment
extras:
  com.microsoft.pai.runtimeplugin:
    - plugin: cmd
      parameters:
        precommands:
          - 'echo "plugin pre-command line 1"'
        postcommands:
          - 'echo "plugin post-command line 1"'
